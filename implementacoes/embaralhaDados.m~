function [trainData, testData] = embaralhaDados( dados, ptrn, tipo )
%EMBARALHADADOS Summary of this function goes here
% dados - dados para embaralhar
% ptrn - porcentagem para treinamento e teste
% tipo [1] - numero de classe desbalanceado
% tipo [2] - numero de classe balanceado

keyboard
[N, ~] = size(dados.x);

if (tipo == 1)
    limit = floor(ptrn*N);
    inds = randperm(N);
    
    trainData.x = dados.x(inds(1:limit), :);
    trainData.y = dados.y(inds(1:limit), :);
    testData.x = dados.x(inds(limit+1:end), :);
    testData.y = dados.y(inds(limit+1:end), :);
    
elseif ( tipo == 2)
    trainData.x = []; trainData.y = []; testData.x = []; testData.y = [];

    
    if (size(dados.y, 2) == 1) % 
        labels = dados.y;
    else %
        labels = vec2ind(dados.y')';
    end
    classes = unique(labels);
    
    numLabels = length(classes);
    for i = 1 : numLabels
        inds = find(labels == classes(i));

        numInds = length(inds);
        
        limit = floor(ptrn*numInds);
        if not(isempty(inds))
            
            inds = inds(randperm(numInds));
            trainData.x = [trainData.x; dados.x(inds(1:limit), :)];
            trainData.y = [trainData.y; dados.y(inds(1:limit), :)];
            
            testData.x = [testData.x; dados.x(inds(limit+1:end), :)];
            testData.y = [testData.y; dados.y(inds(limit+1:end), :)];
        end
    end
    
    % Embaralha os dados
    inds = randperm(size(trainData.x,1));
    trainData.x = trainData.x(inds, :);
    trainData.y = trainData.y(inds, :);
    
    inds = randperm(size(testData.x,1));
    testData.x = testData.x(inds, :);
    testData.y = testData.y(inds, :);
     
end

end

